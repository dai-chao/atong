{"ast":null,"code":"//设置rem的值，一个屏幕宽度为16rem\n(function (win) {\n  function resize() {\n    var domWidth = domEle.getBoundingClientRect().width;\n\n    if (domWidth / v > 540) {\n      domWidth = 540 * v;\n    }\n\n    win.rem = domWidth / 16;\n    domEle.style.fontSize = win.rem + \"px\";\n  }\n\n  var v,\n      initial_scale,\n      timeCode,\n      dom = win.document,\n      domEle = dom.documentElement,\n      viewport = dom.querySelector('meta[name=\"viewport\"]'),\n      flexible = dom.querySelector('meta[name=\"flexible\"]');\n\n  if (viewport) {\n    var o = viewport.getAttribute(\"content\").match(/initial\\-scale=([\"']?)([\\d\\.]+)\\1?/);\n\n    if (o) {\n      initial_scale = parseFloat(o[2]);\n      v = parseInt(1 / initial_scale);\n    }\n  } else if (flexible) {\n    var o = flexible.getAttribute(\"content\").match(/initial\\-dpr=([\"']?)([\\d\\.]+)\\1?/);\n\n    if (o) {\n      v = parseFloat(o[2]);\n      initial_scale = parseFloat((1 / v).toFixed(2));\n    }\n  }\n\n  if (!v && !initial_scale) {\n    var n = (win.navigator.appVersion.match(/android/gi), win.navigator.appVersion.match(/iphone/gi));\n    v = win.devicePixelRatio;\n    v = n ? v >= 3 ? 3 : v >= 2 ? 2 : 1 : 1, initial_scale = 1 / v;\n  } //没有viewport标签的情况下\n\n\n  if (domEle.setAttribute(\"data-dpr\", v), !viewport) {\n    if (viewport = dom.createElement(\"meta\"), viewport.setAttribute(\"name\", \"viewport\"), viewport.setAttribute(\"content\", \"initial-scale=\" + initial_scale + \", maximum-scale=\" + initial_scale + \", minimum-scale=\" + initial_scale + \", user-scalable=no\"), domEle.firstElementChild) {\n      domEle.firstElementChild.appendChild(viewport);\n    } else {\n      var m = dom.createElement(\"div\");\n      m.appendChild(viewport), dom.write(m.innerHTML);\n    }\n  }\n\n  win.dpr = v;\n  win.addEventListener(\"resize\", function () {\n    clearTimeout(timeCode), timeCode = setTimeout(resize, 300);\n  }, false);\n  win.addEventListener(\"pageshow\", function (b) {\n    b.persisted && (clearTimeout(timeCode), timeCode = setTimeout(resize, 300));\n  }, false);\n  resize();\n})(window);","map":{"version":3,"sources":["E:\\atong\\src\\rem\\index.js"],"names":["win","resize","domWidth","domEle","getBoundingClientRect","width","v","rem","style","fontSize","initial_scale","timeCode","dom","document","documentElement","viewport","querySelector","flexible","o","getAttribute","match","parseFloat","parseInt","toFixed","n","navigator","appVersion","devicePixelRatio","setAttribute","createElement","firstElementChild","appendChild","m","write","innerHTML","dpr","addEventListener","clearTimeout","setTimeout","b","persisted","window"],"mappings":"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","sourcesContent":["\r\n\r\n//设置rem的值，一个屏幕宽度为16rem\r\n(function(win) {\r\n    function resize() {\r\n        var domWidth = domEle.getBoundingClientRect().width;\r\n        if(domWidth / v > 540){\r\n            domWidth = 540 * v;\r\n        }\r\n        win.rem = domWidth / 16;\r\n        domEle.style.fontSize = win.rem + \"px\";\r\n    }\r\n    var v, initial_scale, timeCode, dom = win.document, domEle = dom.documentElement, viewport = dom.querySelector('meta[name=\"viewport\"]'), flexible = dom.querySelector('meta[name=\"flexible\"]');\r\n    if (viewport) {\r\n        var o = viewport.getAttribute(\"content\").match(/initial\\-scale=([\"']?)([\\d\\.]+)\\1?/);\r\n        if(o){\r\n            initial_scale = parseFloat(o[2]);\r\n            v = parseInt(1 / initial_scale);\r\n        }\r\n    } else if(flexible) {\r\n        var o = flexible.getAttribute(\"content\").match(/initial\\-dpr=([\"']?)([\\d\\.]+)\\1?/);\r\n        if (o) {\r\n            v = parseFloat(o[2]);\r\n            initial_scale = parseFloat((1 / v).toFixed(2))\r\n        }\r\n    }\r\n    if (!v && !initial_scale) {\r\n        var n = (win.navigator.appVersion.match(/android/gi), win.navigator.appVersion.match(/iphone/gi));\r\n        v = win.devicePixelRatio;\r\n        v = n ? v >= 3 ? 3 : v >= 2 ? 2 : 1 : 1, initial_scale = 1 / v\r\n    }\r\n    //没有viewport标签的情况下\r\n    if (domEle.setAttribute(\"data-dpr\", v), !viewport) {\r\n        if (viewport = dom.createElement(\"meta\"), viewport.setAttribute(\"name\", \"viewport\"), viewport.setAttribute(\"content\", \"initial-scale=\" + initial_scale + \", maximum-scale=\" + initial_scale + \", minimum-scale=\" + initial_scale + \", user-scalable=no\"), domEle.firstElementChild) {\r\n            domEle.firstElementChild.appendChild(viewport)\r\n        } else {\r\n            var m = dom.createElement(\"div\");\r\n            m.appendChild(viewport), dom.write(m.innerHTML)\r\n        }\r\n    }\r\n    win.dpr = v;\r\n    win.addEventListener(\"resize\", function() {\r\n        clearTimeout(timeCode), timeCode = setTimeout(resize, 300)\r\n    }, false);\r\n    win.addEventListener(\"pageshow\", function(b) {\r\n        b.persisted && (clearTimeout(timeCode), timeCode = setTimeout(resize, 300))\r\n    }, false);\r\n    resize();\r\n})(window);"]},"metadata":{},"sourceType":"module"}